To: git@vger.kernel.org
Subject: What's cooking in git.git (Nov 2025, #10; Sun, 30)
X-master-at: f0ef5b6d9bcc258e4cbef93839d1b7465d5212b9
X-next-at: d5f0c6e74e9a802622dcc0000e49faff0f38e160
Bcc: lwn@lwn.net, gitster@pobox.com

What's cooking in git.git (Nov 2025, #10; Sun, 30)
--------------------------------------------------

Here are the topics that have been cooking in my tree.  Commits
prefixed with '+' are in 'next' (being in 'next' is a sign that a
topic is stable enough to be used and are candidate to be in a
future release).  Commits prefixed with '-' are only in 'seen', and
aren't considered "accepted" at all and may be annotated with an URL
to a message that raises issues but they are no means exhaustive.  A
topic without enough support may be discarded after a long period of
no activity (of course they can be resubmit when new interests
arise).

The maintainer will only be online for a few days during the first
week of December, so please expect things to be slower in my tree.

Copies of the source code to Git live in many repositories, and the
following is a list of the ones I push into or their mirrors.  Some
repositories have only a subset of branches.

With maint, master, next, seen, todo:

	git://git.kernel.org/pub/scm/git/git.git/
	git://repo.or.cz/alt-git.git/
	https://kernel.googlesource.com/pub/scm/git/git/
	https://github.com/git/git/
	https://gitlab.com/git-scm/git/

With all the integration branches and topics broken out:

	https://github.com/gitster/git/

Even though the preformatted documentation in HTML and man format
are not sources, they are published in these repositories for
convenience (replace "htmldocs" with "manpages" for the manual
pages):

	git://git.kernel.org/pub/scm/git/git-htmldocs.git/
	https://github.com/gitster/git-htmldocs.git/

Release tarballs are available at:

	https://www.kernel.org/pub/software/scm/git/

--------------------------------------------------
[Graduated to 'master']

* ja/doc-synopsis-style (2025-11-24) 4 commits
  (merged to 'next' on 2025-11-24 at 10610d9a57)
 + doc: pull-fetch-param typofix
  (merged to 'next' on 2025-11-21 at eb9c1703c0)
 + doc: convert git push to synopsis style
 + doc: convert git pull to synopsis style
 + doc: convert git fetch to synopsis style

 Doc mark-up updates.
 
 source: <pull.2002.git.1763588404.gitgitgadget@gmail.com>


* jc/whitespace-incomplete-line (2025-11-12) 12 commits
  (merged to 'next' on 2025-11-24 at 9682c7f652)
 + attr: enable incomplete-line whitespace error for this project
 + diff: highlight and error out on incomplete lines
 + apply: check and fix incomplete lines
 + whitespace: allocate a few more bits and define WS_INCOMPLETE_LINE
 + apply: revamp the parsing of incomplete lines
 + diff: update the way rewrite diff handles incomplete lines
 + diff: call emit_callback ecbdata everywhere
 + diff: refactor output of incomplete line
 + diff: keep track of the type of the last line seen
 + diff: correct suppress_blank_empty hack
 + diff: emit_line_ws_markup() if/else style fix
 + whitespace: correct bit assignment comments

 Both "git apply" and "git diff" learn a new whitespace error class,
 "incomplete-line".
 
 source: <20251112220258.1009253-1-gitster@pobox.com>


* je/doc-data-model (2025-11-12) 1 commit
  (merged to 'next' on 2025-11-24 at 50e59df383)
 + doc: add an explanation of Git's data model

 Add a new manual that describes the data model.
 
 source: <pull.1981.v7.git.1762977200244.gitgitgadget@gmail.com>


* jk/asan-bonanza (2025-11-18) 9 commits
  (merged to 'next' on 2025-11-24 at 066fc38a19)
 + t: enable ASan's strict_string_checks option
 + fsck: avoid parse_timestamp() on buffer that isn't NUL-terminated
 + fsck: remove redundant date timestamp check
 + fsck: avoid strcspn() in fsck_ident()
 + fsck: assert newline presence in fsck_ident()
 + cache-tree: avoid strtol() on non-string buffer
 + Makefile: turn on NO_MMAP when building with ASan
 + pack-bitmap: handle name-hash lookups in incremental bitmaps
 + compat/mmap: mark unused argument in git_munmap()

 Various issues detected by Asan have been corrected.
 
 source: <20251118091127.GA4175601@coredump.intra.peff.net>


* lo/repo-info-all (2025-11-18) 2 commits
  (merged to 'next' on 2025-11-21 at bb6bddcfc7)
 + repo: add --all to git-repo-info
 + repo: factor out field printing to dedicated function

 "git repo info" learned "--all" option.
 
 source: <20251118204929.43597-1-lucasseikioshiro@gmail.com>

--------------------------------------------------
[New Topics]

* tc/last-modified-active-paths-optimization (2025-11-28) 1 commit
 - last-modified: fix use of uninitialized memory

 Recent optimization to "last-modified" command introduced use of
 uninitialized block of memory, which has been corrected.

 Will merge to 'next'.
 source: <20251128-toon-big-endian-ci-v1-1-80da0f629c1e@iotcl.com>


* en/replay-doc-revision-range (2025-11-28) 1 commit
  (merged to 'next' on 2025-11-30 at 37ba09bea2)
 + Documentation/git-replay.adoc: fix errors around revision range

 The use of "revision" (a connected set of commits) has been
 clarified in the "git replay" documentation.

 Will merge to 'master'.
 source: <pull.2012.git.1764391464952.gitgitgadget@gmail.com>


* jk/parse-int (2025-11-30) 5 commits
 - fsck: use parse_unsigned_from_buf() for parsing timestamp
 - cache-tree: use parse_int_from_buf()
 - parse: add functions for parsing from non-string buffers
 - parse: prefer bool to int for boolean returns
 - Merge branch 'jk/asan-bonanza' into jk/parse-int

 Introduce a more robust way to parse a decimal integer stored in a
 piece of memory that is not necessarily terminated with NUL (which
 Asan strict-string-check complains even when use of strtol() is
 safe due to varified existence of whitespace after the digits).

 Will merge to 'next'?
 source: <20251130131351.GA198697@coredump.intra.peff.net>


* js/test-symlink-windows (2025-11-29) 10 commits
 - t7800: work around the MSYS path conversion on Windows
 - t6423: introduce Windows-specific handling for symlinking to /dev/null
 - t1305: skip symlink tests that do not apply to Windows
 - t1006: accommodate for symlink support in MSYS2
 - t0600: fix incomplete prerequisite for a test case
 - t0301: another fix for Windows compatibility
 - t0001: handle `diff --no-index` gracefully
 - mingw: special-case `open(symlink, O_CREAT | O_EXCL)`
 - apply: symbolic links lack a "trustable executable bit"
 - t9700: accommodate for Windows paths

 Prepare test suite 

 Comments?
 cf. <xmqqms44cb7p.fsf@gitster.g>
 cf. <xmqqecpgc8wd.fsf@gitster.g>
 source: <pull.2009.git.1764440906.gitgitgadget@gmail.com>


* rs/diff-index-find-copies-harder-optim (2025-11-30) 1 commit
 - diff-index: don't queue unchanged filepairs with diff_change()

 Halve the memory consumed by artificial filepairs created during
 "git diff --find-copioes-harder", also making the operation run
 faster.

 Will merge to 'next'.
 source: <aa28974b-ec73-4562-bfc8-4745ad58b55a@web.de>

--------------------------------------------------
[Cooking]

* pw/replay-exclude-gpgsig-fix (2025-11-26) 1 commit
  (merged to 'next' on 2025-11-30 at 3dda1242db)
 + replay: do not copy "gpgsign-sha256" header

 "git replay" forgot to omit the "gpgsig-sha256" extended header
 from the resulting commit the same way it omits "gpgsig", which has
 been corrected.

 Will merge to 'master'.
 source: <4f04af5790353b074cf122c450c1cd3f8d1cecf3.1764167611.git.phillip.wood@dunelm.org.uk>


* tc/last-modified-options-cleanup (2025-11-26) 4 commits
 - fixup! last-modified: document option --max-depth
 - last-modified: document how depth is handled better
 - last-modified: document option --max-depth
 - last-modified: handle and document NUL termination

 The "-z" and "--max-depth" documentation (and implementation of
 "-z") in the "git last-modified" command have been updated.

 Expecting a reroll.
 source: <20251126-toon-last-modified-zzzz-v1-0-608350df0caa@iotcl.com>


* yc/xdiff-patience-optim (2025-11-26) 1 commit
  (merged to 'next' on 2025-11-30 at db62d67599)
 + xdiff: optimize patience diff's LCS search

 The way patience diff finds LCS has been optimized.

 Will merge to 'master'.
 source: <pull.2109.v2.git.git.1764209766305.gitgitgadget@gmail.com>


* bc/zsh-testsuite (2025-11-27) 2 commits
  (merged to 'next' on 2025-11-30 at b4a3081f6f)
 + t5564: fix test hang under zsh's sh mode
 + t0614: use numerical comparison with test_line_count

 A few tests have been updated to work under the shell compatible
 mode of zsh.

 Will merge to 'master'.
 source: <20251128012107.101431-1-sandals@crustytoothpaste.net>


* ds/doc-scalar-config (2025-11-26) 5 commits
 - scalar: document config settings
 - scalar: alphabetize and simplify config
 - scalar: remove stale config values
 - scalar: use index.skipHash=true for performance
 - scalar: annotate config file with "set by scalar"

 Documentation updates.

 Expecting a reroll.
 cf. <089c3225-82cb-4039-83df-f97ea9fd49b2@gmail.com>
 source: <pull.2010.git.1764195516.gitgitgadget@gmail.com>


* pw/replay-drop-empty (2025-11-27) 2 commits
 - replay: drop commits that become empty
 - Merge branch 'ps/history' into pw/replay-drop-empty
 (this branch uses ps/history.)

 "git replay" is taught to drop commits that become empty (not the
 ones that are empty in the original).

 On hold, until the base topic stabilizes.
 source: <8a2a1215306452147cc7b803530ab2429bf57f15.1764260150.git.phillip.wood@dunelm.org.uk>


* sp/shallow-time-boundary (2025-11-23) 1 commit
 - shallow: set borders which are all reachable after clone shallow since

 The set of shallow boundary "git clone --shallow-since" leaves
 contained commits that are not on the boundary, which has been
 corrected.

 Comments?
 source: <pull.2107.v2.git.git.1763926552033.gitgitgadget@gmail.com>


* rs/config-set-multi-error-message-fix (2025-11-24) 1 commit
  (merged to 'next' on 2025-11-26 at 639a1e26d2)
 + config: fix suggestion for failed set of multi-valued option

 The error message given by "git config set", when the variable
 being updated has more than one values defined, used old style "git
 config" syntax with an incorrect option in its hint, both of which
 have been corrected.

 Will merge to 'master'.
 source: <c09945fe-fee2-47f6-8193-ac60d7245209@web.de>


* rs/config-unset-opthelp-fix (2025-11-24) 1 commit
  (merged to 'next' on 2025-11-26 at 31e282f4ae)
 + config: fix short help of unset flags

 The option help text given by "git config unset -h" described
 the "--all" option to "replace", not "unset", multiple variables,
 which has been corrected.

 Will merge to 'master'.
 source: <06997dce-e4d5-4889-8e70-5f44da3dc800@web.de>


* wm/complete-git-short-opts (2025-11-26) 1 commit
 - completion: complete "git -<TAB>" with short options

 The command line completion script (in contrib/) learned to
 complete "git -<TAB>" to give single-letter options like "-C".

 Will merge to 'next'?
 source: <pull.2100.v2.git.git.1764174391776.gitgitgadget@gmail.com>


* jc/optional-path (2025-11-20) 3 commits
  (merged to 'next' on 2025-11-25 at 5e75404281)
 + config: really treat missing optional path as not configured
 + config: really pretend missing :(optional) value is not there
 + config: mark otherwise unused function as file-scope static

 "git config get --path" segfaulted on an ":(optional)path" that
 does not exist, which has been corrected.

 Will merge to 'master'.
 source: <xmqqikf47ajk.fsf@gitster.g>


* kh/doc-committer-date-is-author-date (2025-11-20) 1 commit
  (merged to 'next' on 2025-11-25 at 9f829587af)
 + doc: warn against --committer-date-is-author-date

 The "--committer-date-is-author-date" option of "git am/rebase" is
 a misguided one.  The documentation is updated to discourage its
 use.

 Will merge to 'master'.
 source: <V2_committer-date-is-author-date.1@msgid.xyz>


* gf/win32-pthread-cond-init (2025-11-20) 1 commit
 - win32: pthread_cond_init should return a value

 Emulation code clean-up.

 Will merge to 'next'?
 source: <pull.2103.v3.git.git.1763675016637.gitgitgadget@gmail.com>


* kn/ref-location (2025-11-26) 2 commits
 - refs: add GIT_REF_URI to specify reference backend and directory
 - refs: support obtaining ref_store for given dir

 A mechanism to specify what reference backend to use and store
 references in which directory is introduced, which would likely to
 be useful during ref migration.

 Comments?
 source: <20251126-kn-alternate-ref-dir-v2-0-8b9f6f18f635@gmail.com>


* js/ci-show-breakage-in-dockerized-jobs (2025-11-17) 1 commit
  (merged to 'next' on 2025-11-26 at 3c4a8c430f)
 + ci(dockerized): do show the result of failing tests again

 Dockerised jobs at the GitHub Actions CI have been taught to show
 more details of failed tests.

 Will merge to 'master'.
 cf. <xmqqpl9gike6.fsf@gitster.g>
 cf. <CABPp-BErdhTjbqDem4Xvc-XbhgLUEpy9-eiaaR1F_diMca--6A@mail.gmail.com>
 source: <pull.2003.git.1763399064983.gitgitgadget@gmail.com>


* js/strip-scalar-too (2025-11-17) 1 commit
  (merged to 'next' on 2025-11-25 at 9f2607acfb)
 + make strip: include `scalar`

 "make strip" has been taught to strip "scalar" as well as "git".

 Will merge to 'master'.
 cf. <xmqq7bvoiadg.fsf@gitster.g>
 source: <pull.2004.git.1763409086322.gitgitgadget@gmail.com>


* dw/config-global-list (2025-10-09) 4 commits
 - config: keep bailing on unreadable global files
 - config: read global scope via config_sequence
 - config: test home and xdg files in `list --global`
 - cleanup_path: force forward slashes on Windows

 "git config --list --global", unlike "git config --list", did not
 consult both of the two possible per-user sources of the
 configuration files, i.e. $HOME/.gitconfig and the XDG one, which
 has been corrected.

 Expecting a reroll.
 cf. <20251122020047.GB3947@linuxonhyperv3.guj3yctzbm1etfxqx2vob5hsef.xx.internal.cloudapp.net>
 source: <pull.1938.git.1760058849.gitgitgadget@gmail.com>


* ps/object-read-stream (2025-11-23) 20 commits
 - streaming: drop redundant type and size pointers
 - streaming: move into object database subsystem
 - streaming: refactor interface to be object-database-centric
 - streaming: move logic to read packed objects streams into backend
 - streaming: move logic to read loose objects streams into backend
 - streaming: make the `odb_read_stream` definition public
 - streaming: get rid of `the_repository`
 - streaming: rely on object sources to create object stream
 - packfile: introduce function to read object info from a store
 - streaming: move zlib stream into backends
 - streaming: create structure for filtered object streams
 - streaming: create structure for packed object streams
 - streaming: create structure for loose object streams
 - streaming: create structure for in-core object streams
 - streaming: allocate stream inside the backend-specific logic
 - streaming: explicitly pass packfile info when streaming a packed object
 - streaming: propagate final object type via the stream
 - streaming: drop the `open()` callback function
 - streaming: rename `git_istream` into `odb_read_stream`
 - Merge branch 'ps/object-source-loose' into ps/object-read-stream

 The "git_istream" abstraction has been revamped to make it easier
 to interface with pluggable object database design.

 Will merge to 'next'?
 source: <20251123-b4-pks-odb-read-stream-v3-0-1a129182822b@pks.im>


* ps/object-source-management (2025-11-18) 14 commits
  (merged to 'next' on 2025-11-26 at 6f98745b4a)
 + odb: handle recreation of quarantine directories
 + odb: handle changing a repository's commondir
 + chdir-notify: add function to unregister listeners
 + odb: handle initialization of sources in `odb_new()`
 + http-push: stop setting up `the_repository` for each reference
 + t/helper: stop setting up `the_repository` repeatedly
 + builtin/index-pack: fix deferred fsck outside repos
 + oidset: introduce `oidset_equal()`
 + odb: move logic to disable ref updates into repo
 + odb: refactor `odb_clear()` to `odb_free()`
 + odb: adopt logic to close object databases
 + setup: convert `set_git_dir()` to have file scope
 + path: move `enter_repo()` into "setup.c"
 + Merge branch 'ps/object-source-loose' into ps/object-source-management

 Code refactoring around object database sources.

 Will merge to 'master'.
 cf. <aSAZSyUzIMvn-IvR@pks.im>
 source: <20251119-b4-pks-odb-creation-v1-0-2b2ed2612cb6@pks.im>


* jc/submodule-add (2025-11-15) 1 commit
 - submodule add: sanity check existing .gitmodules

 "git submodule add" to add a submodule under <name> segfaulted,
 when a submodule.<name>.something is already in .gitmodules file
 without defining where its submodule.<name>.path is, which has been
 corrected.

 Comments?
 source: <xmqqv7jacvdq.fsf@gitster.g>


* kn/fix-fetch-backfill-tag-with-batched-ref-updates (2025-11-21) 3 commits
 - fetch: fix failed batched updates skipping operations
 - fetch: fix non-conflicting tags not being committed
 - fetch: extract out reference committing logic

 "git fetch" that involves fetching tags, when a tag being fetched
 needs to overwrite existing one, failed to fetch other tags, which
 has been corrected.

 Will merge to 'next'?
 source: <20251121-fix-tags-not-fetching-v8-0-23b53a8a8334@gmail.com>


* lc/rebase-trailer (2025-11-05) 4 commits
 - rebase: support --trailer
 - trailer: append trailers in-process and drop the fork to `interpret-trailers`
 - trailer: move process_trailers to trailer.h
 - interpret-trailers: factor out buffer-based processing to process_trailers()

 Refactor code paths to run "interpret-trailers" from "git
 commit/tag" and use it in "git rebase".

 Expecting a reroll.
 cf. <19a8fe42354.3909481a3912041.7970296104893780556@linux.beauty>
 source: <20251105142944.73061-1-me@linux.beauty>


* jc/exclude-with-gitignore (2025-11-04) 1 commit
 - dir.c: do not be fooled by :(exclude) pathspec elements

 "git add ':(exclude)foo.o'" is clearly a request not to add 'foo.o',
 but the command complained about listing an ignored path foo.o on
 the command line, which has been corrected.

 Comments?
 source: <xmqqtsz9o3cn.fsf@gitster.g>


* cc/fast-import-strip-if-invalid (2025-11-16) 3 commits
  (merged to 'next' on 2025-11-26 at 7235cd0d18)
 + fast-import: add 'strip-if-invalid' mode to --signed-commits=<mode>
 + commit: refactor verify_commit_buffer()
 + fast-import: refactor finalize_commit_buffer()

 "git fast-import" learns "--strip-if-invalid" option to drop
 invalid cryptographic signature from objects.

 Will merge to 'master'.
 source: <20251117043450.322644-1-christian.couder@gmail.com>


* bc/sha1-256-interop-02 (2025-11-17) 15 commits
 - object-file-convert: always make sure object ID algo is valid
 - rust: add a small wrapper around the hashfile code
 - rust: add a new binary object map format
 - rust: add functionality to hash an object
 - rust: add a build.rs script for tests
 - hash: expose hash context functions to Rust
 - write-or-die: add an fsync component for the object map
 - csum-file: define hashwrite's count as a uint32_t
 - rust: add additional helpers for ObjectID
 - hash: add a function to look up hash algo structs
 - rust: add a hash algorithm abstraction
 - rust: add a ObjectID struct
 - hash: use uint32_t for object_id algorithm
 - conversion: don't crash when no destination algo
 - repository: require Rust support for interoperability

 The code to maintain mapping between object names in multiple hash
 functions is being added, written in Rust.
 source: <20251117221621.2863243-1-sandals@crustytoothpaste.net>


* en/xdiff-cleanup-2 (2025-11-18) 10 commits
  (merged to 'next' on 2025-11-25 at 452b7107da)
 + xdiff: rename rindex -> reference_index
 + xdiff: change rindex from long to size_t in xdfile_t
 + xdiff: make xdfile_t.nreff a size_t instead of long
 + xdiff: make xdfile_t.nrec a size_t instead of long
 + xdiff: split xrecord_t.ha into line_hash and minimal_perfect_hash
 + xdiff: use unambiguous types in xdl_hash_record()
 + xdiff: use size_t for xrecord_t.size
 + xdiff: make xrecord_t.ptr a uint8_t instead of char
 + xdiff: use ptrdiff_t for dstart/dend
 + doc: define unambiguous type mappings across C and Rust

 Code clean-up.

 Will merge to 'master'.
 source: <pull.2070.v5.git.git.1763505262.gitgitgadget@gmail.com>


* ar/run-command-hook (2025-11-24) 10 commits
 - receive-pack: convert receive hooks to hook API
 - receive-pack: convert update hooks to new API
 - hooks: allow callers to capture output
 - run-command: allow capturing of collated output
 - hook: allow overriding the ungroup option
 - reference-transaction: use hook API instead of run-command
 - transport: convert pre-push to hook API
 - hook: convert 'post-rewrite' hook in sequencer.c to hook API
 - hook: provide stdin via callback
 - run-command: add stdin callback for parallelization

 Use hook API to replace ad-hoc invocation of hook scripts with the
 run_command() API.

 Will merge to 'next'?
 source: <20251124172043.1650014-1-adrian.ratiu@collabora.com>


* je/doc-reset (2025-10-17) 4 commits
 - doc: git-reset: clarify `git reset <pathspec>`
 - doc: git-reset: clarify `git reset [mode]`
 - doc: git-reset: clarify intro
 - doc: git-reset: reorder the forms

 Documentation updates.

 Expecting a reroll.
 cf. <8099e7ef-2673-407e-8cca-e6b566b99549@app.fastmail.com>
 source: <pull.1991.git.1760731558.gitgitgadget@gmail.com>


* ps/history (2025-10-27) 12 commits
 - builtin/history: implement "split" subcommand
 - cache-tree: allow writing in-memory index as tree
 - add-patch: add support for in-memory index patching
 - add-patch: remove dependency on "add-interactive" subsystem
 - add-patch: split out `struct interactive_options`
 - add-patch: split out header from "add-interactive.h"
 - builtin/history: implement "reword" subcommand
 - builtin: add new "history" command
 - replay: stop using `the_repository`
 - replay: extract logic to pick commits
 - wt-status: provide function to expose status for trees
 - Merge branch 'sa/replay-atomic-ref-updates' into ps/history
 (this branch is used by pw/replay-drop-empty.)

 "git history" history rewriting UI.

 Expecting a reroll.
 cf. <aRxDYkeAi8T-HH8M@pks.im>
 source: <20251027-b4-pks-history-builtin-v6-0-407dd3f57ad3@pks.im>


* ms/doc-worktree-side-by-side (2025-10-10) 2 commits
 - doc: git-worktree: Add side by side branch checkout example
 - doc: git-worktree: Link to examples

 Document "git worktree add" and use of out-of-tree worktrees with
 examples.

 Expecting a reroll.
 cf. <CAPig+cSNesf0UwS4=Bxe-Qn+G9y3YYPyOK+7y3q8QJk+o7jaVg@mail.gmail.com>
 source: <a203b35538847f3c9358a5ae26fb4ebea5734cfc.1759420102.git.msuchanek@suse.de>


* ar/submodule-gitdir-tweak (2025-11-19) 7 commits
 - meson/Makefile: allow setting submodule encoding at build time
 - submodule: use hashed name for gitdir
 - submodule: fix case-folding gitdir filesystem colisions
 - submodule: add extension to encode gitdir paths
 - submodule: always validate gitdirs inside submodule_name_to_gitdir
 - builtin/credential-store: move is_rfc3986_unreserved to url.[ch]
 - submodule--helper: use submodule_name_to_gitdir in add_submodule

 Avoid local submodule repository directory paths overlapping with
 each other by encoding submodule names before using them as path
 components.

 Will merge to 'next'?
 source: <20251119211030.2008441-1-adrian.ratiu@collabora.com>
