#!/bin/sh

# wrap-for-bin.sh: Template for git executable wrapper scripts
# to run test suite against sandbox, but with only bindir-installed
# executables in PATH.  The Makefile copies this into various
# files in bin-wrappers, substituting
# /workspaces/git/build, '/workspaces/git/build/templates/blt' and /workspaces/git/build/git-cvsserver.

GIT_EXEC_PATH='/workspaces/git/build'
if test -n "$NO_SET_GIT_TEMPLATE_DIR"
then
	unset GIT_TEMPLATE_DIR
else
	GIT_TEMPLATE_DIR=''/workspaces/git/build/templates/blt''
	export GIT_TEMPLATE_DIR
fi
MERGE_TOOLS_DIR='/workspaces/git/contrib/buildsystems/../../mergetools'
GITPERLLIB='/workspaces/git/build/perl/build/lib'"${GITPERLLIB:+:$GITPERLLIB}"
GIT_TEXTDOMAINDIR='/workspaces/git/build/po/build/locale'
PATH='/workspaces/git/build/bin-wrappers:'"$PATH"

export MERGE_TOOLS_DIR GIT_EXEC_PATH GITPERLLIB PATH GIT_TEXTDOMAINDIR

case "$GIT_DEBUGGER" in
'')
	exec "/workspaces/git/build/git-cvsserver" "$@"
	;;
1)
	unset GIT_DEBUGGER
	exec gdb --args "/workspaces/git/build/git-cvsserver" "$@"
	;;
*)
	GIT_DEBUGGER_ARGS="$GIT_DEBUGGER"
	unset GIT_DEBUGGER
	exec ${GIT_DEBUGGER_ARGS} "/workspaces/git/build/git-cvsserver" "$@"
	;;
esac
