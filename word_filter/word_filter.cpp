// word_filter.cpp : Defines the entry point for the console application.
//

#include "stdafx.h"
#include <stdlib.h>
#include <malloc.h>
#include <cctype>
#include <string.h>

static int rejectShort = 0;
static int rejectLong = 0;
static int rejectHex = 0;
static int rejectBad = 0;

static const char * badWords[] = {
	"adult",
	"Affair",
	"aids",
	"American",
	"Angel",
	"Bastard",
	"Beer",
	"Bible",
	"Black",
	"Blue",
	"Body",
	"Boy",
	"Capitalism",
	"Champagne",
	"Cheque",
	"Christian",
	"Church",
	"Conception",
	"Crack",
	"Creation",
	"Disability",
	"Easter",
	"English",
	"Fat",
	"Female",
	"Favour",
	"Fibre",
	"Freedom",
	"French",
	"Gender",
	"Girl",
	"God",
	"Guy",
	"Harbour",
	"Honour",
	"Husband",
	"Infant",
	"Jew",
	"Labour",
	"Lover",
	"Male",
	"Man",
	"Mate",
	"Metre",
	"Miss",
	"Mother",
	"Mrs",
	"Police",
	"Policeman",
	"Pope",
	"Prayer",
	"Pregnancy",
	"President",
	"Programme",
	"Rape",
	"Religion",
	"Sex",
	"Shit",
	"Sin",
	"Sir",
	"Sister",
	"Son",
	"Strip",
	"Stroke",
	"Suicide",
	"Tonne",
	"Violence",
	"War",
	"Weapon",
	"Welfare",
	"Widow",
	"Wife",
	"Woman",
	"Blind",
	"Bust",
	"Crap",
	"EST",
	"Fleshy",
	"Frank",
	"Gay",
	"Ghostly",
	"Grave",
	"Holy",
	"INC",
	"Nude",
	"Queer",
	"Sexy",
	"Sleazy",
	"Spanish",
	"WAN",
	NULL
};

static bool considerWord(const char * wordStart, const char * wordEnd)
{
	int length = wordEnd - wordStart;

	if (length < 3)
	{
		++rejectShort;
		return false;
	}
	if (length > 8)
	{
		++rejectLong;
		return false;
	}

	bool hasNonHex = false;

	const char * pWord = wordStart;

	while (pWord < wordEnd && !hasNonHex)
	{
		char letter = tolower(*pWord);
		hasNonHex = (letter > 'f') || (letter < 'a');
		++pWord;
	}

	if (!hasNonHex)
	{
		++rejectHex;
		return false;
	}

	int badWordIndex = 0;
	while (badWords[badWordIndex])
	{
		if (!_strnicmp(badWords[badWordIndex], wordStart, length))
		{
			++rejectBad;
			return false;
		}
		++badWordIndex;
	}

	return true;
}

static int __cdecl compareString(const void * w1, const void * w2)
{
	return strcmp((const char *)*(const void **)w1, (const char *)*(const void **)w2);
}

static int filter_words()
{
	int wordsFound = 0;
	int wordsToFind = 1024 * 4;
	int wordsToIgnore = 0; // 20;
	int wordPosition = 1;

	FILE * fptr = NULL;
	//errno_t err = fopen_s(&fptr, "20k.txt", "rb");
	errno_t err = fopen_s(&fptr, "2knouns.txt", "rb");
	//errno_t err = fopen_s(&fptr, "500adj.txt", "rb");

	if (err != 0)
	{
		printf("Could not open 20k.txt\n");
		return -1;
	}

	int seekResult = fseek(fptr, 0, SEEK_END);
	if (seekResult != 0)
	{
		printf("Could not determine file size\n");
		fclose(fptr);
		return -2;
	}

	int fsize = ftell(fptr);
	seekResult = fseek(fptr, 0, SEEK_SET);

	if (seekResult != 0)
	{
		printf("Could not reset file pointer\n");
		fclose(fptr);
		return -3;
	}

	char * fbuffer = (char *)malloc(fsize);
	if (NULL == fbuffer)
	{
		printf("Could allocate buffer\n");
		fclose(fptr);
		return -4;
	}

	int numRead = fread(fbuffer, 1, fsize, fptr);

	if (numRead != fsize)
	{
		printf("error reading file\n");
		fclose(fptr);
		return -5;
	}

	char * wordStart = fbuffer;
	char * listEnd = &(fbuffer[fsize]);

	char ** wordList = (char **)malloc(sizeof(char *) * wordsToFind);
	if (wordList == NULL)
	{
		printf("could not allocate word index\n");
		fclose(fptr);
		return -6;
	}

	while ((wordStart < listEnd) && (wordsFound < wordsToFind))
	{
		//skip the leading words on the line as needed
		int wordCount = 0;
		while (wordCount < wordPosition)
		{
			while ((wordStart < listEnd) && (*wordStart != ' ') && (*wordStart != 0x0D) && (*wordStart != 0x0A))
			{
				++wordStart;
			}

			while ((wordStart < listEnd) && (*wordStart == ' '))
			{
				++wordStart;
			}
			++wordCount;
		}

		char * wordEnd = wordStart;
		while ((wordEnd < listEnd) && (*wordEnd != 0x0A) && (*wordEnd != 0x0D) && (*wordEnd != ' '))
		{
			++wordEnd;
		}

		if (wordsToIgnore > 0)
		{
			--wordsToIgnore;
		}
		else if (considerWord(wordStart, wordEnd))
		{
			//printf("%.*s\n", wordEnd - wordStart, wordStart);
			*wordEnd = 0;
			wordList[wordsFound] = wordStart;
			while (wordStart < wordEnd)
			{
				*wordStart = tolower(*wordStart);
				++wordStart;
			}
			++wordsFound;
		}

		//advance to the end of the line
		while ((wordEnd < listEnd) && (*wordEnd != 0x0A) && (*wordEnd != 0x0D))
		{
			++wordEnd;
		}

		//find the next line
		while ((wordEnd < listEnd) && ((*wordEnd == 0x0A) || (*wordEnd == 0x0D)))
		{
			++wordEnd;
		}

		wordStart = wordEnd;
	}

	qsort(wordList, wordsFound, sizeof(char *), compareString);

	printf("const char * wordList[%d] = {\n", wordsFound);

	int lastWordIndex = (wordsFound - 1);
	int wordIndex;
	for (wordIndex = 0; wordIndex < wordsFound; ++wordIndex)
	{
		printf("    \"%s\"%s\n", wordList[wordIndex], (wordIndex == lastWordIndex) ? "" : ",");
	}
	printf("};\n");

	fprintf(stderr, "%d words (%d short words rejected, %d long words rejected, %d hex words rejected, %d bad words rejected)\n", wordsFound, rejectShort, rejectLong, rejectHex, rejectBad);

	fclose(fptr);
	free(fbuffer);
    return 0;
}


const char * adj_list[] = {
	"absolute",
	"acute",
	"airy",
	"alone",
	"ample",
	"angry",
	"apt",
	"arcane",
	"arch",
	"arty",
	"average",
	"baggy",
	"bald",
	"balmy",
	"bare",
	"big",
	"bland",
	"blank",
	"bleak",
	"blond",
	"bloody",
	"blunt",
	"bold",
	"bonny",
	"boring",
	"bossy",
	"bouncy",
	"brainy",
	"brash",
	"brave",
	"breezy",
	"brief",
	"bright",
	"brisk",
	"broad",
	"brown",
	"bubbly",
	"bulky",
	"bumpy",
	"burly",
	"bushy",
	"busy",
	"calm",
	"canny",
	"casual",
	"cheap",
	"cheeky",
	"cheery",
	"chief",
	"chilly",
	"chunky",
	"classy",
	"clean",
	"clear",
	"clever",
	"close",
	"cloudy",
	"clumsy",
	"coarse",
	"cold",
	"compact",
	"complete",
	"cool",
	"corrupt",
	"costly",
	"cosy",
	"crafty",
	"crazy",
	"creamy",
	"crisp",
	"cross",
	"crude",
	"cruel",
	"crusty",
	"cuddly",
	"cunning",
	"curious",
	"curly",
	"cute",
	"daft",
	"dainty",
	"damp",
	"dank",
	"darling",
	"deadly",
	"dear",
	"deep",
	"deft",
	"dim",
	"dingy",
	"dire",
	"dirty",
	"discreet",
	"divine",
	"dizzy",
	"dodgy",
	"dotty",
	"dour",
	"dowdy",
	"down",
	"downtown",
	"dozy",
	"drab",
	"draughty",
	"dreamy",
	"dreary",
	"drowsy",
	"drunk",
	"dry",
	"dull",
	"dumb",
	"dumpy",
	"dusky",
	"dusty",
	"early",
	"earthy",
	"easy",
	"edgy",
	"empty",
	"extreme",
	"faint",
	"fair",
	"fancy",
	"far",
	"fast",
	"fatty",
	"fierce",
	"fiery",
	"filthy",
	"fine",
	"firm",
	"fishy",
	"fit",
	"fizzy",
	"flash",
	"flashy",
	"flat",
	"flimsy",
	"floppy",
	"fluffy",
	"foggy",
	"fond",
	"foul",
	"frail",
	"fresh",
	"friendly",
	"frilly",
	"frosty",
	"fruity",
	"full",
	"funny",
	"furry",
	"fussy",
	"fuzzy",
	"gaudy",
	"gaunt",
	"ghastly",
	"glad",
	"glassy",
	"gloomy",
	"glossy",
	"gold",
	"good",
	"grand",
	"grassy",
	"greasy",
	"great",
	"greedy",
	"green",
	"grey",
	"grim",
	"grimy",
	"gritty",
	"gross",
	"grubby",
	"gruesome",
	"guilty",
	"hairy",
	"handsome",
	"handy",
	"happy",
	"hard",
	"hardy",
	"harsh",
	"hasty",
	"hazy",
	"heady",
	"healthy",
	"hearty",
	"heavy",
	"hefty",
	"high",
	"hilly",
	"hoarse",
	"hollow",
	"homely",
	"honest",
	"hot",
	"huge",
	"hungry",
	"husky",
	"icy",
	"ill",
	"joint",
	"jolly",
	"juicy",
	"just",
	"keen",
	"kind",
	"kindly",
	"lame",
	"large",
	"late",
	"lazy",
	"leafy",
	"lean",
	"left",
	"lengthy",
	"light",
	"likely",
	"limp",
	"lively",
	"lofty",
	"lonely",
	"long",
	"loud",
	"lousy",
	"lovely",
	"low",
	"lowly",
	"lucky",
	"lumpy",
	"lush",
	"mad",
	"mature",
	"mean",
	"meek",
	"mellow",
	"mere",
	"merry",
	"messy",
	"mid",
	"mighty",
	"mild",
	"minute",
	"misty",
	"modest",
	"moist",
	"moody",
	"muddy",
	"murky",
	"narrow",
	"nasty",
	"naughty",
	"near",
	"neat",
	"needy",
	"net",
	"new",
	"nice",
	"noisy",
	"numb",
	"obscure",
	"oily",
	"old",
	"pale",
	"patchy",
	"perverse",
	"petty",
	"pink",
	"plain",
	"pleasant",
	"plump",
	"polite",
	"poor",
	"posh",
	"pretty",
	"prickly",
	"princely",
	"profound",
	"prompt",
	"proud",
	"prudent",
	"pure",
	"purple",
	"quaint",
	"quick",
	"quiet",
	"rainy",
	"rare",
	"raw",
	"ready",
	"real",
	"rear",
	"red",
	"remote",
	"rich",
	"right",
	"ripe",
	"risky",
	"roast",
	"robust",
	"rocky",
	"rosy",
	"rough",
	"round",
	"ruddy",
	"rude",
	"rusty",
	"sad",
	"safe",
	"salty",
	"sandy",
	"sane",
	"scant",
	"scarce",
	"scary",
	"scruffy",
	"secure",
	"severe",
	"shabby",
	"shadowy",
	"shady",
	"shaky",
	"shallow",
	"sheer",
	"shiny",
	"short",
	"shrewd",
	"shrill",
	"shy",
	"sick",
	"sickly",
	"silky",
	"silly",
	"simple",
	"sincere",
	"sketchy",
	"skimpy",
	"skinny",
	"slack",
	"sleek",
	"sleepy",
	"slick",
	"slight",
	"slim",
	"slimy",
	"sloppy",
	"slow",
	"small",
	"smart",
	"smelly",
	"smoky",
	"smooth",
	"smug",
	"snap",
	"snappy",
	"sneaky",
	"snide",
	"snowy",
	"snug",
	"soft",
	"soggy",
	"sole",
	"sore",
	"sorry",
	"sound",
	"sour",
	"soy",
	"spare",
	"sparse",
	"speedy",
	"spicy",
	"spiky",
	"split",
	"spoilt",
	"spooky",
	"sporty",
	"springy",
	"squeaky",
	"staid",
	"stale",
	"starry",
	"stately",
	"staunch",
	"steady",
	"stealthy",
	"steely",
	"steep",
	"sticky",
	"stiff",
	"still",
	"stocky",
	"stony",
	"stormy",
	"stout",
	"straight",
	"strange",
	"strict",
	"strong",
	"stuffy",
	"sturdy",
	"sublime",
	"sunny",
	"supple",
	"sure",
	"sweet",
	"swift",
	"tall",
	"tame",
	"tasty",
	"taut",
	"thick",
	"thin",
	"thirsty",
	"tidy",
	"tight",
	"tiny",
	"tough",
	"trendy",
	"tricky",
	"trim",
	"trite",
	"true",
	"trusty",
	"ugly",
	"uncanny",
	"unfair",
	"ungainly",
	"unhappy",
	"united",
	"unkind",
	"unlikely",
	"unlucky",
	"unruly",
	"unsold",
	"untidy",
	"urgent",
	"vain",
	"vast",
	"very",
	"vile",
	"void",
	"wacky",
	"warm",
	"wary",
	"weak",
	"wealthy",
	"weary",
	"weedy",
	"weighty",
	"welcome",
	"well",
	"wet",
	"white",
	"wide",
	"wild",
	"windy",
	"wise",
	"witty",
	"woolly",
	"worldly",
	"worthy",
	"wrong",
	"wry",
	"yellow",
	"young",
	"zany"
};
const int num_adj = sizeof(adj_list) / sizeof(adj_list[0]);

const char * noun_list[] = {
	"abbey",
	"ability",
	"absence",
	"abuse",
	"accent",
	"access",
	"accident",
	"account",
	"accuracy",
	"acid",
	"acre",
	"act",
	"action",
	"activity",
	"actor",
	"addition",
	"address",
	"advance",
	"advice",
	"adviser",
	"age",
	"agency",
	"agenda",
	"agent",
	"aim",
	"air",
	"aircraft",
	"airline",
	"airport",
	"alarm",
	"album",
	"alcohol",
	"alliance",
	"ally",
	"ambition",
	"amount",
	"analysis",
	"analyst",
	"anger",
	"angle",
	"animal",
	"answer",
	"anxiety",
	"appeal",
	"appendix",
	"apple",
	"approach",
	"approval",
	"area",
	"argument",
	"arm",
	"army",
	"arrest",
	"arrival",
	"art",
	"article",
	"artist",
	"aspect",
	"assault",
	"assembly",
	"asset",
	"attack",
	"attempt",
	"attitude",
	"audience",
	"audit",
	"auditor",
	"aunt",
	"author",
	"autonomy",
	"autumn",
	"avenue",
	"average",
	"award",
	"baby",
	"back",
	"bag",
	"balance",
	"ball",
	"ban",
	"band",
	"bank",
	"banking",
	"bar",
	"barrier",
	"basket",
	"bath",
	"bathroom",
	"battery",
	"battle",
	"bay",
	"beach",
	"beam",
	"bean",
	"bear",
	"beauty",
	"bedroom",
	"being",
	"belief",
	"bell",
	"belt",
	"bench",
	"benefit",
	"bid",
	"bike",
	"bill",
	"billion",
	"bird",
	"birth",
	"birthday",
	"bishop",
	"bit",
	"blade",
	"blanket",
	"block",
	"blood",
	"blow",
	"board",
	"boat",
	"bomb",
	"bond",
	"bone",
	"bonus",
	"book",
	"boom",
	"boot",
	"border",
	"borough",
	"boss",
	"bottle",
	"bottom",
	"boundary",
	"bowl",
	"box",
	"brain",
	"branch",
	"brand",
	"breach",
	"bread",
	"break",
	"breast",
	"breath",
	"breed",
	"brick",
	"bridge",
	"bronze",
	"brother",
	"brush",
	"budget",
	"builder",
	"building",
	"bulk",
	"burden",
	"bureau",
	"bush",
	"business",
	"butter",
	"button",
	"buyer",
	"cabinet",
	"cable",
	"cake",
	"call",
	"camera",
	"camp",
	"campaign",
	"canal",
	"cancer",
	"capacity",
	"captain",
	"car",
	"carbon",
	"card",
	"care",
	"career",
	"carpet",
	"carriage",
	"carrier",
	"case",
	"cash",
	"castle",
	"casualty",
	"cat",
	"category",
	"cause",
	"ceiling",
	"cell",
	"centre",
	"century",
	"ceremony",
	"chain",
	"chair",
	"chairman",
	"chamber",
	"champion",
	"chance",
	"change",
	"channel",
	"chap",
	"chapel",
	"chapter",
	"charge",
	"charity",
	"chart",
	"charter",
	"check",
	"cheek",
	"cheese",
	"chemical",
	"chest",
	"chicken",
	"chief",
	"child",
	"chip",
	"choice",
	"cinema",
	"circle",
	"circuit",
	"citizen",
	"city",
	"claim",
	"clash",
	"class",
	"clause",
	"clay",
	"clerk",
	"client",
	"cliff",
	"climate",
	"clinic",
	"clock",
	"closure",
	"cloth",
	"clothing",
	"cloud",
	"club",
	"clue",
	"coach",
	"coal",
	"coast",
	"coat",
	"code",
	"coffee",
	"coin",
	"cold",
	"collapse",
	"college",
	"colonel",
	"colony",
	"colour",
	"column",
	"comfort",
	"command",
	"comment",
	"company",
	"complex",
	"compound",
	"computer",
	"concern",
	"concert",
	"conduct",
	"conflict",
	"congress",
	"consent",
	"consumer",
	"contact",
	"content",
	"contest",
	"context",
	"contract",
	"contrast",
	"control",
	"copper",
	"copy",
	"core",
	"corner",
	"corp",
	"corridor",
	"cost",
	"cottage",
	"cotton",
	"council",
	"count",
	"counter",
	"country",
	"county",
	"coup",
	"couple",
	"course",
	"court",
	"cousin",
	"cover",
	"coverage",
	"cow",
	"craft",
	"crash",
	"cream",
	"creature",
	"credit",
	"creditor",
	"crew",
	"cricket",
	"crime",
	"crisis",
	"critic",
	"crop",
	"cross",
	"crowd",
	"crown",
	"cry",
	"crystal",
	"culture",
	"cup",
	"cupboard",
	"currency",
	"curtain",
	"curve",
	"custom",
	"customer",
	"cut",
	"cycle",
	"daddy",
	"damage",
	"dance",
	"danger",
	"dark",
	"darkness",
	"darling",
	"data",
	"database",
	"date",
	"daughter",
	"day",
	"deal",
	"dealer",
	"death",
	"debate",
	"debt",
	"decision",
	"deck",
	"decline",
	"defeat",
	"defence",
	"defender",
	"deficit",
	"degree",
	"delay",
	"delegate",
	"delight",
	"delivery",
	"demand",
	"democrat",
	"density",
	"deposit",
	"depth",
	"deputy",
	"desert",
	"design",
	"designer",
	"desire",
	"desk",
	"detail",
	"device",
	"devil",
	"diagram",
	"dialogue",
	"diamond",
	"diary",
	"diet",
	"dinner",
	"director",
	"disaster",
	"disc",
	"discount",
	"disease",
	"dish",
	"disk",
	"disorder",
	"display",
	"disposal",
	"dispute",
	"distance",
	"district",
	"dividend",
	"division",
	"divorce",
	"dna",
	"dock",
	"doctor",
	"doctrine",
	"document",
	"dog",
	"dollar",
	"domain",
	"door",
	"doorway",
	"dose",
	"doubt",
	"dozen",
	"draft",
	"drama",
	"drawing",
	"dream",
	"dress",
	"drink",
	"drive",
	"driver",
	"drop",
	"drug",
	"duck",
	"duke",
	"duration",
	"dust",
	"duty",
	"eagle",
	"ear",
	"earl",
	"earth",
	"economy",
	"edge",
	"edition",
	"editor",
	"effect",
	"effort",
	"egg",
	"election",
	"element",
	"emission",
	"emotion",
	"emperor",
	"empire",
	"employee",
	"employer",
	"end",
	"enemy",
	"energy",
	"engine",
	"engineer",
	"enquiry",
	"entity",
	"entrance",
	"entry",
	"envelope",
	"episode",
	"equation",
	"equity",
	"era",
	"error",
	"escape",
	"essay",
	"essence",
	"estate",
	"estimate",
	"evening",
	"event",
	"evidence",
	"example",
	"exchange",
	"excuse",
	"exercise",
	"expense",
	"expert",
	"export",
	"exposure",
	"extent",
	"eye",
	"fabric",
	"facility",
	"fact",
	"factor",
	"factory",
	"failure",
	"faith",
	"fall",
	"family",
	"fan",
	"fantasy",
	"farm",
	"farmer",
	"fashion",
	"fate",
	"father",
	"fault",
	"fear",
	"feature",
	"feeling",
	"fellow",
	"fence",
	"festival",
	"fiction",
	"field",
	"fig",
	"fight",
	"fighting",
	"figure",
	"file",
	"film",
	"filter",
	"final",
	"finance",
	"finding",
	"finger",
	"finish",
	"fire",
	"firm",
	"fish",
	"fishing",
	"flag",
	"flame",
	"flat",
	"fleet",
	"flight",
	"floor",
	"flow",
	"flower",
	"fluid",
	"focus",
	"folk",
	"food",
	"fool",
	"foot",
	"football",
	"force",
	"forest",
	"form",
	"format",
	"formula",
	"fortune",
	"forum",
	"fraction",
	"fragment",
	"frame",
	"fraud",
	"friend",
	"front",
	"fruit",
	"fuel",
	"function",
	"fund",
	"funding",
	"funeral",
	"future",
	"gain",
	"gallery",
	"game",
	"gang",
	"gap",
	"garage",
	"garden",
	"gas",
	"gate",
	"gaze",
	"gear",
	"gene",
	"general",
	"german",
	"gesture",
	"gift",
	"glance",
	"glass",
	"glory",
	"goal",
	"gold",
	"golf",
	"good",
	"governor",
	"grade",
	"graduate",
	"grain",
	"grammar",
	"grant",
	"grass",
	"green",
	"grip",
	"ground",
	"group",
	"growth",
	"guard",
	"guardian",
	"guest",
	"guide",
	"guilt",
	"guitar",
	"gun",
	"habit",
	"hair",
	"half",
	"hall",
	"hand",
	"hardware",
	"harm",
	"hat",
	"head",
	"heading",
	"health",
	"hearing",
	"heart",
	"heat",
	"heaven",
	"heel",
	"height",
	"hell",
	"help",
	"heritage",
	"hero",
	"hill",
	"hint",
	"hip",
	"history",
	"hold",
	"holder",
	"holding",
	"hole",
	"holiday",
	"home",
	"hope",
	"horizon",
	"horror",
	"horse",
	"hospital",
	"host",
	"hotel",
	"hour",
	"house",
	"housing",
	"human",
	"humour",
	"hundred",
	"hunting",
	"ice",
	"idea",
	"identity",
	"ideology",
	"illness",
	"image",
	"impact",
	"import",
	"inch",
	"incident",
	"income",
	"increase",
	"index",
	"industry",
	"injury",
	"inn",
	"input",
	"inquiry",
	"insect",
	"insight",
	"instance",
	"instinct",
	"interest",
	"interior",
	"interval",
	"invasion",
	"investor",
	"iron",
	"island",
	"isle",
	"issue",
	"item",
	"jacket",
	"jet",
	"job",
	"joke",
	"journal",
	"journey",
	"joy",
	"judge",
	"judgment",
	"juice",
	"junction",
	"jury",
	"justice",
	"key",
	"kid",
	"killer",
	"kind",
	"king",
	"kingdom",
	"kiss",
	"kit",
	"kitchen",
	"knee",
	"knife",
	"label",
	"lad",
	"lady",
	"lake",
	"lamp",
	"land",
	"landing",
	"landlord",
	"lane",
	"language",
	"laugh",
	"launch",
	"law",
	"lawyer",
	"layer",
	"lead",
	"leader",
	"leaf",
	"leaflet",
	"league",
	"learning",
	"lease",
	"leather",
	"leave",
	"lecture",
	"left",
	"leg",
	"leisure",
	"length",
	"lesson",
	"letter",
	"level",
	"liberty",
	"library",
	"licence",
	"lie",
	"life",
	"lifespan",
	"lifetime",
	"lift",
	"light",
	"limit",
	"line",
	"link",
	"lion",
	"lip",
	"list",
	"living",
	"load",
	"loan",
	"local",
	"location",
	"lock",
	"logic",
	"look",
	"lord",
	"lorry",
	"loss",
	"lot",
	"loyalty",
	"luck",
	"lunch",
	"lung",
	"machine",
	"magazine",
	"mail",
	"majority",
	"maker",
	"manager",
	"manner",
	"map",
	"margin",
	"mark",
	"market",
	"marriage",
	"mass",
	"master",
	"match",
	"material",
	"matter",
	"mayor",
	"meal",
	"meaning",
	"measure",
	"meat",
	"medicine",
	"medium",
	"meeting",
	"member",
	"memory",
	"menu",
	"merchant",
	"merger",
	"merit",
	"mess",
	"message",
	"metal",
	"method",
	"middle",
	"midnight",
	"mile",
	"milk",
	"mill",
	"million",
	"mind",
	"mine",
	"miner",
	"mineral",
	"minimum",
	"minister",
	"ministry",
	"minority",
	"minute",
	"mirror",
	"missile",
	"mission",
	"mistake",
	"mixture",
	"mode",
	"model",
	"module",
	"molecule",
	"moment",
	"money",
	"monopoly",
	"month",
	"mood",
	"moon",
	"morning",
	"mortgage",
	"motion",
	"motive",
	"motor",
	"mountain",
	"mouse",
	"mouth",
	"move",
	"movement",
	"movie",
	"mud",
	"mum",
	"mummy",
	"murder",
	"muscle",
	"museum",
	"music",
	"musician",
	"mystery",
	"myth",
	"nail",
	"name",
	"nation",
	"nature",
	"navy",
	"neck",
	"need",
	"needle",
	"nerve",
	"nest",
	"net",
	"network",
	"night",
	"noise",
	"norm",
	"nose",
	"note",
	"notice",
	"notion",
	"novel",
	"number",
	"nurse",
	"nursery",
	"oak",
	"object",
	"observer",
	"occasion",
	"ocean",
	"offence",
	"offender",
	"offer",
	"office",
	"officer",
	"official",
	"oil",
	"opening",
	"opera",
	"operator",
	"opinion",
	"opponent",
	"option",
	"order",
	"organ",
	"organism",
	"origin",
	"other",
	"outcome",
	"outline",
	"output",
	"owner",
	"oxygen",
	"pace",
	"pack",
	"package",
	"packet",
	"page",
	"pain",
	"paint",
	"painter",
	"painting",
	"pair",
	"palace",
	"palm",
	"panel",
	"panic",
	"paper",
	"parent",
	"parish",
	"park",
	"part",
	"particle",
	"partner",
	"party",
	"pass",
	"passage",
	"passion",
	"past",
	"patch",
	"path",
	"patient",
	"pattern",
	"pause",
	"pavement",
	"payment",
	"peace",
	"peak",
	"peasant",
	"pen",
	"penalty",
	"pension",
	"people",
	"percent",
	"period",
	"person",
	"pet",
	"petrol",
	"phase",
	"phone",
	"photo",
	"phrase",
	"piano",
	"picture",
	"piece",
	"pig",
	"pile",
	"pilot",
	"pipe",
	"pit",
	"pitch",
	"pity",
	"place",
	"plan",
	"plane",
	"planet",
	"plant",
	"plastic",
	"plate",
	"platform",
	"play",
	"player",
	"pleasure",
	"plot",
	"pocket",
	"poem",
	"poet",
	"poetry",
	"point",
	"pole",
	"policy",
	"poll",
	"pond",
	"pool",
	"port",
	"portrait",
	"position",
	"post",
	"pot",
	"potato",
	"pound",
	"power",
	"practice",
	"premise",
	"premium",
	"presence",
	"present",
	"press",
	"pressure",
	"price",
	"pride",
	"priest",
	"prince",
	"princess",
	"print",
	"printer",
	"priority",
	"prison",
	"prisoner",
	"prize",
	"problem",
	"process",
	"producer",
	"product",
	"profile",
	"profit",
	"project",
	"promise",
	"proof",
	"property",
	"proposal",
	"prospect",
	"protein",
	"protest",
	"province",
	"pub",
	"public",
	"pupil",
	"purchase",
	"purpose",
	"quality",
	"quantity",
	"quarter",
	"queen",
	"question",
	"rabbit",
	"race",
	"radio",
	"raid",
	"rail",
	"railway",
	"rain",
	"range",
	"rank",
	"rat",
	"rate",
	"ratio",
	"reaction",
	"reader",
	"reading",
	"reality",
	"reason",
	"rebel",
	"receipt",
	"receiver",
	"recipe",
	"record",
	"recovery",
	"red",
	"ref",
	"reform",
	"refugee",
	"refusal",
	"regime",
	"region",
	"register",
	"reign",
	"relation",
	"relative",
	"release",
	"relief",
	"remark",
	"remedy",
	"removal",
	"rent",
	"repair",
	"reply",
	"report",
	"reporter",
	"republic",
	"request",
	"research",
	"reserve",
	"resident",
	"resort",
	"resource",
	"respect",
	"response",
	"rest",
	"result",
	"return",
	"revenue",
	"review",
	"reward",
	"rhythm",
	"ride",
	"right",
	"ring",
	"riot",
	"rise",
	"risk",
	"rival",
	"river",
	"road",
	"rock",
	"rod",
	"role",
	"roll",
	"roof",
	"room",
	"root",
	"rope",
	"rose",
	"round",
	"route",
	"routine",
	"row",
	"rubbish",
	"rule",
	"rumour",
	"run",
	"running",
	"safety",
	"sake",
	"salary",
	"salt",
	"sample",
	"sand",
	"sandwich",
	"saving",
	"scale",
	"scandal",
	"scene",
	"schedule",
	"scheme",
	"scholar",
	"school",
	"science",
	"scope",
	"score",
	"screen",
	"sea",
	"search",
	"season",
	"seat",
	"second",
	"secret",
	"section",
	"sector",
	"security",
	"seed",
	"self",
	"seller",
	"seminar",
	"sense",
	"sentence",
	"sequence",
	"sergeant",
	"servant",
	"server",
	"service",
	"session",
	"set",
	"setting",
	"shade",
	"shadow",
	"shame",
	"shape",
	"share",
	"sheep",
	"sheet",
	"shelf",
	"shell",
	"shift",
	"ship",
	"shirt",
	"shit",
	"shock",
	"shoe",
	"shop",
	"shopping",
	"shore",
	"shortage",
	"shot",
	"shoulder",
	"show",
	"shower",
	"side",
	"sight",
	"sign",
	"signal",
	"silence",
	"silk",
	"silver",
	"singer",
	"site",
	"size",
	"skill",
	"skin",
	"skirt",
	"sky",
	"sleep",
	"slope",
	"smell",
	"smile",
	"smoke",
	"snow",
	"society",
	"soil",
	"soldier",
	"solution",
	"song",
	"sort",
	"soul",
	"sound",
	"source",
	"south",
	"space",
	"speaker",
	"specimen",
	"spectrum",
	"speech",
	"speed",
	"spell",
	"spending",
	"sphere",
	"spirit",
	"sport",
	"spot",
	"spread",
	"spring",
	"squad",
	"square",
	"staff",
	"stage",
	"stairs",
	"stake",
	"stance",
	"stand",
	"standard",
	"standing",
	"star",
	"start",
	"state",
	"station",
	"statute",
	"steam",
	"steel",
	"step",
	"stick",
	"stimulus",
	"stock",
	"stomach",
	"stone",
	"stop",
	"storage",
	"store",
	"storm",
	"story",
	"strain",
	"stranger",
	"strategy",
	"stream",
	"street",
	"strength",
	"stress",
	"strike",
	"string",
	"struggle",
	"student",
	"studio",
	"study",
	"stuff",
	"style",
	"subject",
	"subsidy",
	"success",
	"sugar",
	"suit",
	"sum",
	"summary",
	"summer",
	"summit",
	"sun",
	"supplier",
	"supply",
	"support",
	"surface",
	"surgery",
	"surprise",
	"survey",
	"survival",
	"swimming",
	"switch",
	"sword",
	"symbol",
	"sympathy",
	"symptom",
	"system",
	"table",
	"tactic",
	"tail",
	"tale",
	"talent",
	"talk",
	"tank",
	"tape",
	"target",
	"task",
	"taste",
	"tax",
	"taxation",
	"taxi",
	"tea",
	"teacher",
	"teaching",
	"team",
	"tear",
	"teenager",
	"temple",
	"tenant",
	"tendency",
	"tension",
	"term",
	"terrace",
	"test",
	"testing",
	"text",
	"theatre",
	"theft",
	"theme",
	"theory",
	"therapy",
	"thesis",
	"thing",
	"thinking",
	"thought",
	"thousand",
	"threat",
	"throat",
	"ticket",
	"tide",
	"tie",
	"timber",
	"time",
	"timing",
	"tin",
	"tip",
	"tissue",
	"title",
	"toilet",
	"tone",
	"tongue",
	"tool",
	"tooth",
	"top",
	"topic",
	"tory",
	"total",
	"touch",
	"tour",
	"tourist",
	"tower",
	"town",
	"toy",
	"trace",
	"track",
	"trade",
	"trader",
	"trading",
	"traffic",
	"tragedy",
	"train",
	"trainer",
	"training",
	"transfer",
	"travel",
	"tray",
	"treasury",
	"treaty",
	"tree",
	"trend",
	"trial",
	"tribunal",
	"trick",
	"trip",
	"triumph",
	"troop",
	"trouble",
	"truck",
	"trust",
	"trustee",
	"truth",
	"tube",
	"tune",
	"tunnel",
	"turn",
	"turnover",
	"tutor",
	"twin",
	"type",
	"uncle",
	"uniform",
	"union",
	"unit",
	"unity",
	"universe",
	"unix",
	"use",
	"user",
	"valley",
	"value",
	"van",
	"variable",
	"variety",
	"vat",
	"vehicle",
	"vendor",
	"venture",
	"verse",
	"version",
	"vessel",
	"victim",
	"victory",
	"video",
	"view",
	"villa",
	"village",
	"virtue",
	"virus",
	"vision",
	"visit",
	"visitor",
	"voice",
	"volume",
	"vote",
	"voter",
	"wage",
	"walk",
	"wall",
	"ward",
	"warmth",
	"warning",
	"waste",
	"watch",
	"water",
	"wave",
	"way",
	"weakness",
	"weather",
	"wedding",
	"week",
	"weekend",
	"weight",
	"wheel",
	"while",
	"whisky",
	"white",
	"whole",
	"will",
	"win",
	"wind",
	"window",
	"wine",
	"wing",
	"winner",
	"winter",
	"wire",
	"wish",
	"witness",
	"wonder",
	"wood",
	"wool",
	"word",
	"work",
	"worker",
	"working",
	"workshop",
	"world",
	"worry",
	"worth",
	"wound",
	"writer",
	"writing",
	"yard",
	"year",
	"youth",
	"zone"
};
const int num_noun = sizeof(noun_list) / sizeof(noun_list[0]);

static const char * sha_to_phrase(const unsigned char *sha1, int len)
{
#define PHRASE_WORD_MAX (10)

	static char phraseBuffer[PHRASE_WORD_MAX * 3 + 3];

	unsigned int shaValue = 0;
	int shaIndex;
	for (shaIndex = 0; shaIndex < 7; ++shaIndex)
	{
		shaValue *= 16;

		unsigned char shaChar = (shaIndex < len) ? sha1[shaIndex] : '0';

		if ((shaChar >= '0') && (shaChar <= '9'))
		{
			shaValue += (shaChar - '0');
		}
		else if ((shaChar >= 'a') && (shaChar <= 'f'))
		{
			shaValue += (shaChar - 'a');
		}
		else if ((shaChar >= 'A') && (shaChar <= 'F'))
		{
			shaValue += (shaChar - 'A');
		}
	}

	int nounIndex = shaValue % num_noun;
	int adjectives = shaValue / num_noun;
	int adj1 = adjectives % num_adj;
	int adj2 = adjectives / num_adj;

	sprintf_s(phraseBuffer, "%s-%s-%s", adj_list[adj1], adj_list[adj2], noun_list[nounIndex]);

	return phraseBuffer;
}

int main()
{
	printf("Hello, World %s\n", sha_to_phrase((const unsigned char *)"2349ab8fcb98723894", 10));
}
